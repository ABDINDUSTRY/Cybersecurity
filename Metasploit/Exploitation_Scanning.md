
````markdown
# 🔎 Metasploit – Scan de ports & identification des services

Metasploit intègre plusieurs **modules de scan de ports** permettant d’identifier les services ouverts sur un système ou un réseau cible.  

👉 La commande suivante permet de lister les modules disponibles :  
```bash
search portscan
````

<img width="2209" height="945" alt="image" src="https://github.com/user-attachments/assets/6e42248e-3a22-4ff7-a01d-f1c0ffb361d7" />

---

## ⚙️ Configuration des modules de scan

Les modules d’analyse de port nécessitent la configuration de certaines **options** (par ex. `RHOSTS`, `THREADS`, `PORTS`).

<img width="2191" height="922" alt="image" src="https://github.com/user-attachments/assets/07349649-7656-48ff-bb41-fd79ff2499d2" />

---

## 🌐 Scan avec Nmap dans Metasploit

Metasploit permet d’intégrer directement **Nmap** depuis l’invite `msfconsole`.

Exemple :

```bash
db_nmap -sV 192.168.1.10
```

<img width="2167" height="734" alt="image" src="https://github.com/user-attachments/assets/b0a78254-668a-467c-9994-f936e49f7803" />

---

## 📡 Identification des services UDP

Le module **`scanner/discovery/udp_sweep`** permet d’identifier rapidement certains services fonctionnant sur le protocole **UDP**.

⚠️ Attention : ce module ne réalise **pas un scan exhaustif**, mais il permet de détecter des services courants comme **DNS** ou **NetBIOS**.

```bash
use auxiliary/scanner/discovery/udp_sweep
set RHOSTS 192.168.1.10
run
```

<img width="2267" height="967" alt="image" src="https://github.com/user-attachments/assets/af5a2689-78e2-442c-840d-41617d784d27" />

---

## 📂 Scans SMB

Metasploit propose plusieurs modules spécifiques pour **SMB**.
Dans un réseau d’entreprise, les plus utiles sont :

* **`smb_enumshares`** → Enumère les partages disponibles.
* **`smb_version`** → Identifie la version SMB + infos sur la machine.

Exemple :

```bash
use auxiliary/scanner/smb/smb_version
set RHOSTS 192.168.1.10
run
```

<img width="2244" height="944" alt="image" src="https://github.com/user-attachments/assets/8660ece2-8478-4a40-bcec-edf7e4656423" />

---

## 🖧 NetBIOS – À ne pas oublier !

👉 **NetBIOS (Network Basic Input Output System)** est similaire à SMB et permet :

* La communication entre ordinateurs d’un réseau,
* Le partage de fichiers et d’imprimantes,
* L’identification de rôles via le **nom NetBIOS** (ex. `CORP-DC`, `DEVOPS`, `SALES`).

⚠️ Certains partages peuvent être accessibles :

* **sans mot de passe**,
* ou protégés par des mots de passe faibles (`admin`, `root`, `toor`, etc.).

---

## 🔍 Exemple : Scan de version avec Nmap

Pour identifier la **version d’un service** sur un port précis (ex. 8000) :

```bash
nmap -sV <adresse_ip> -p 8000
```

<img width="2234" height="826" alt="image" src="https://github.com/user-attachments/assets/1e52989d-cdc4-4105-9a06-942afd25652c" />

---

## 🔐 Attaque par force brute SMB

Metasploit permet aussi de lancer des attaques par **bruteforce SMB** :

```bash
use auxiliary/scanner/smb/smb_login
set RHOSTS 192.168.1.10
set SMBUser penny
set PASS_FILE /path/to/wordlist.txt
run
```

📸 Exemple d’exécution :

<img width="2871" height="894" alt="Capture d'écran 2025-08-30 010547" src="https://github.com/user-attachments/assets/ce921319-b4a9-458a-aeba-68e17a6f02ec" />  

<img width="2849" height="1437" alt="Capture d'écran 2025-08-30 010617" src="https://github.com/user-attachments/assets/3353e8db-668d-408a-9337-35909db1de5b" />  

<img width="2850" height="1429" alt="Capture d'écran 2025-08-30 010636" src="https://github.com/user-attachments/assets/4896ece2-2487-40a1-ac1a-f5ab7454a0e0" />  

<img width="2840" height="1416" alt="Capture d'écran 2025-08-30 010654" src="https://github.com/user-attachments/assets/00d23c17-b322-4514-bbcb-741f88a3c818" />  

---

## ✅ Résumé

* 🔎 **Portscan** : identification rapide des services ouverts.
* 🌐 **Nmap intégré** : scans avancés directement dans Metasploit.
* 📡 **UDP Sweep** : détection rapide de services UDP (DNS, NetBIOS).
* 📂 **SMB/NetBIOS** : enumération des partages, versions, noms de machines.
* 🔐 **Bruteforce SMB** : test d’accès avec dictionnaire.

Metasploit + Nmap = 🛠️ un duo puissant pour la phase de reconnaissance et d’exploitation ! 🚀

```

